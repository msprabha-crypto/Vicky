<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, user-scalable=no" />
  <title>Will you be mine always?</title>

  <!-- Confetti library -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

  <style>
    :root {
      --bg1: #ffd6e7;
      --bg2: #ffeef6;
      --card: #ffffffcc;
      --yes: #ff3b7a;
      --yesHover: #ff1f68;
    }

    * { 
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      margin: 0;
      min-height: 100svh;
      display: grid;
      place-items: center;
      background: radial-gradient(circle at top, var(--bg2), var(--bg1));
      font-family: system-ui, sans-serif;
      overflow: hidden;
      padding: 20px 16px;
      touch-action: pan-y;
    }

    /* FULL-SCREEN CONFETTI CANVAS */
    #confettiCanvas {
      position: fixed;
      inset: 0;
      width: 100vw;
      height: 100vh;
      pointer-events: none;
      z-index: 9999;
    }

    .card {
      width: min(720px, 100%);
      max-width: 500px;
      padding: 32px 24px;
      background: var(--card);
      backdrop-filter: blur(10px);
      border-radius: 22px;
      text-align: center;
      box-shadow: 0 18px 60px rgba(0,0,0,.15);
    }

    .art {
      width: min(220px, 70vw);
      margin: 0 auto 16px;
      display: block;
      filter: drop-shadow(0 10px 14px rgba(0,0,0,.12));
    }

    h1 {
      font-size: clamp(22px, 5vw, 38px);
      margin: 16px 0 24px;
      line-height: 1.3;
      padding: 0 10px;
    }

    .button-zone {
      position: relative;
      width: 100%;
      height: 200px;
      margin: 20px auto;
      touch-action: none;
      max-width: 420px;
    }

    button {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      padding: 18px 32px;
      font-size: 19px;
      font-weight: 800;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      box-shadow: 0 10px 24px rgba(0,0,0,.14);
      user-select: none;
      -webkit-tap-highlight-color: transparent;
      transition: transform .12s ease, background .12s ease;
      min-width: 100px;
      touch-action: none;
    }

    #yesBtn {
      left: 10%;
      background: var(--yes);
      color: #fff;
    }
    #yesBtn:hover, #yesBtn:active { 
      background: var(--yesHover); 
    }

    #noBtn {
      right: 10%;
      background: #e5e7eb;
      color: #111827;
    }

    .hint {
      margin-top: 16px;
      font-size: 14px;
      opacity: .7;
      padding: 0 20px;
    }

    .result {
      display: none;
      margin-top: 24px;
      animation: pop .35s ease;
    }

    .result h2 {
      font-size: clamp(28px, 5vw, 46px);
      margin: 10px 0 20px;
    }

    .fireworks {
      width: min(320px, 85vw);
      margin: 0 auto;
      display: block;
      border-radius: 12px;
    }

    @keyframes pop {
      from { transform: scale(.96); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    /* Mobile-specific adjustments */
    @media (max-width: 480px) {
      .card {
        padding: 28px 20px;
      }

      .button-zone {
        height: 180px;
      }

      button {
        padding: 16px 28px;
        font-size: 17px;
      }

      #yesBtn {
        left: 5%;
      }

      #noBtn {
        right: 5%;
      }

      .hint {
        font-size: 13px;
      }
    }

    /* Very small screens */
    @media (max-width: 360px) {
      button {
        padding: 14px 24px;
        font-size: 16px;
      }
    }
  </style>
</head>

<body>
  <canvas id="confettiCanvas"></canvas>

  <main class="card">
    <!-- CUTE TEDDY BEAR WITH HEART -->
    <svg class="art" viewBox="0 0 320 240" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="fur" x1="0" x2="1">
          <stop offset="0" stop-color="#d4a574"/>
          <stop offset="1" stop-color="#b8936c"/>
        </linearGradient>
        <linearGradient id="lighter" x1="0" y1="0" x2="0" y2="1">
          <stop offset="0" stop-color="#f0d9b5"/>
          <stop offset="1" stop-color="#e6c9a8"/>
        </linearGradient>
        <linearGradient id="heart" x1="0" x2="1">
          <stop offset="0" stop-color="#ff4d7d"/>
          <stop offset="1" stop-color="#ff1f68"/>
        </linearGradient>
      </defs>

      <!-- Floating heart -->
      <path d="M240 35 C240 22 255 16 265 27
               C275 16 290 22 290 35
               C290 56 265 68 265 78
               C265 68 240 56 240 35Z"
            fill="url(#heart)">
        <animateTransform
          attributeName="transform"
          type="translate"
          values="0,0; 0,-5; 0,0"
          dur="2s"
          repeatCount="indefinite"/>
      </path>

      <!-- Body -->
      <ellipse cx="190" cy="150" rx="70" ry="65" fill="url(#fur)"/>
      
      <!-- Belly patch -->
      <ellipse cx="190" cy="155" rx="45" ry="40" fill="url(#lighter)"/>

      <!-- Arms -->
      <ellipse cx="135" cy="145" rx="25" ry="35" fill="url(#fur)" transform="rotate(-20 135 145)"/>
      <ellipse cx="245" cy="145" rx="25" ry="35" fill="url(#fur)" transform="rotate(20 245 145)"/>
      <ellipse cx="135" cy="155" rx="18" ry="15" fill="url(#lighter)" transform="rotate(-20 135 155)"/>
      <ellipse cx="245" cy="155" rx="18" ry="15" fill="url(#lighter)" transform="rotate(20 245 155)"/>

      <!-- Legs -->
      <ellipse cx="165" cy="200" rx="22" ry="28" fill="url(#fur)"/>
      <ellipse cx="215" cy="200" rx="22" ry="28" fill="url(#fur)"/>
      <ellipse cx="165" cy="210" rx="20" ry="12" fill="url(#lighter)"/>
      <ellipse cx="215" cy="210" rx="20" ry="12" fill="url(#lighter)"/>

      <!-- Head -->
      <circle cx="190" cy="95" r="50" fill="url(#fur)"/>
      
      <!-- Ears -->
      <circle cx="155" cy="65" r="22" fill="url(#fur)"/>
      <circle cx="225" cy="65" r="22" fill="url(#fur)"/>
      <circle cx="155" cy="65" r="14" fill="#c4956f"/>
      <circle cx="225" cy="65" r="14" fill="#c4956f"/>

      <!-- Snout -->
      <ellipse cx="190" cy="105" rx="28" ry="24" fill="url(#lighter)"/>
      
      <!-- Nose -->
      <ellipse cx="190" cy="100" rx="10" ry="8" fill="#5a4a3a"/>

      <!-- Mouth -->
      <path d="M190 100 Q185 108 180 106" stroke="#5a4a3a" stroke-width="2.5" fill="none" stroke-linecap="round"/>
      <path d="M190 100 Q195 108 200 106" stroke="#5a4a3a" stroke-width="2.5" fill="none" stroke-linecap="round"/>

      <!-- Eyes -->
      <circle cx="170" cy="88" r="6" fill="#2d2d2d"/>
      <circle cx="210" cy="88" r="6" fill="#2d2d2d"/>
      <circle cx="172" cy="86" r="2.5" fill="white"/>
      <circle cx="212" cy="86" r="2.5" fill="white"/>

      <!-- Eyebrows (cute expression) -->
      <path d="M162 78 Q170 76 178 78" stroke="#5a4a3a" stroke-width="2" fill="none" stroke-linecap="round"/>
      <path d="M202 78 Q210 76 218 78" stroke="#5a4a3a" stroke-width="2" fill="none" stroke-linecap="round"/>

      <!-- Rosy cheeks -->
      <circle cx="155" cy="100" r="10" fill="#ffb3ba" opacity="0.5"/>
      <circle cx="225" cy="100" r="10" fill="#ffb3ba" opacity="0.5"/>

      <!-- Stitching details (teddy bear style) -->
      <circle cx="190" cy="130" r="2" fill="#8b7355"/>
      <circle cx="190" cy="145" r="2" fill="#8b7355"/>
      <circle cx="190" cy="160" r="2" fill="#8b7355"/>
    </svg>

    <h1>Vicky will you be mine always?</h1>

    <section class="button-zone" id="zone">
      <button id="yesBtn">Yes</button>
      <button id="noBtn">No</button>
    </section>

    <!-- HINT -->
    <div class="hint" id="hint">"No" seems a bit shy ðŸ˜ˆ</div>

    <section class="result" id="result">
      <h2>YAY! I win! ðŸŽ‰</h2>
      <img
        class="fireworks"
        src="https://media.giphy.com/media/26ufdipQqU2lhNA4g/giphy.gif"
        alt="Fireworks"
      />
    </section>
  </main>

  <script>
    const zone = document.getElementById("zone");
    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");
    const result = document.getElementById("result");
    const hint = document.getElementById("hint");

    /* ---------- CONFETTI ---------- */
    const confettiCanvas = document.getElementById("confettiCanvas");

    function resizeConfettiCanvas() {
      const dpr = Math.max(1, window.devicePixelRatio || 1);
      confettiCanvas.width = Math.floor(window.innerWidth * dpr);
      confettiCanvas.height = Math.floor(window.innerHeight * dpr);
      confettiCanvas.style.width = "100vw";
      confettiCanvas.style.height = "100vh";
    }

    resizeConfettiCanvas();
    window.addEventListener("resize", resizeConfettiCanvas);
    window.addEventListener("orientationchange", () => setTimeout(resizeConfettiCanvas, 150));

    const confettiInstance = confetti.create(confettiCanvas, {
      resize: false,
      useWorker: true
    });

    function fullScreenConfetti() {
      const duration = 4000;
      const animationEnd = Date.now() + duration;
      const defaults = { startVelocity: 30, spread: 360, ticks: 200, zIndex: 0 };

      function randomInRange(min, max) {
        return Math.random() * (max - min) + min;
      }

      // MASSIVE HEART EXPLOSION at center
      confettiInstance({
        ...defaults,
        particleCount: 150,
        spread: 180,
        startVelocity: 50,
        origin: { x: 0.5, y: 0.5 },
        colors: ['#ff1f68', '#ff4d7d', '#ff6b9d', '#ff8fb3', '#ffb3c6'],
        shapes: ['circle'],
        scalar: 1.2,
        gravity: 0.6,
        ticks: 300
      });

      // Heart shower from top - continuous rain
      const interval = setInterval(function() {
        const timeLeft = animationEnd - Date.now();

        if (timeLeft <= 0) {
          return clearInterval(interval);
        }

        const particleCount = 8;

        // Hearts raining down
        confettiInstance({
          particleCount,
          startVelocity: randomInRange(20, 35),
          spread: 60,
          origin: { x: randomInRange(0.1, 0.9), y: -0.1 },
          colors: ['#ff1f68', '#ff4d7d', '#ff6b9d', '#ff8fb3'],
          shapes: ['circle'],
          scalar: randomInRange(0.8, 1.5),
          gravity: 0.8,
          ticks: 300,
          drift: randomInRange(-0.5, 0.5)
        });

        // Colorful stuffed animal shapes (using squares rotated)
        confettiInstance({
          particleCount: 2,
          startVelocity: randomInRange(15, 25),
          spread: 50,
          origin: { x: randomInRange(0.1, 0.9), y: -0.1 },
          colors: ['#98D8C8', '#FFB6C1', '#DDA0DD', '#F0E68C', '#B0E0E6'],
          shapes: ['square'],
          scalar: randomInRange(1.5, 2.5),
          gravity: 1.2,
          ticks: 400,
          drift: randomInRange(-1, 1)
        });
      }, 150);

      // Side bursts after 400ms
      setTimeout(() => {
        // Left side burst
        confettiInstance({
          particleCount: 50,
          angle: 60,
          spread: 55,
          startVelocity: 55,
          origin: { x: 0, y: 0.6 },
          colors: ['#ff1f68', '#ff4d7d', '#98D8C8', '#FFB6C1'],
          shapes: ['circle', 'square'],
          scalar: 1.5,
          gravity: 1,
          ticks: 300
        });

        // Right side burst
        confettiInstance({
          particleCount: 50,
          angle: 120,
          spread: 55,
          startVelocity: 55,
          origin: { x: 1, y: 0.6 },
          colors: ['#ff1f68', '#ff4d7d', '#DDA0DD', '#F0E68C'],
          shapes: ['circle', 'square'],
          scalar: 1.5,
          gravity: 1,
          ticks: 300
        });
      }, 400);

      // Big explosion from bottom after 800ms
      setTimeout(() => {
        confettiInstance({
          particleCount: 100,
          spread: 160,
          startVelocity: 60,
          origin: { x: 0.5, y: 0.8 },
          colors: ['#ff1f68', '#ff4d7d', '#ff6b9d', '#ff8fb3', '#ffb3c6', '#98D8C8', '#FFB6C1'],
          shapes: ['circle', 'square'],
          scalar: 1.8,
          gravity: 0.8,
          ticks: 350
        });
      }, 800);
    }

    /* ---------- YES BUTTON GROWS ---------- */
    let yesScale = 1;
    function growYes() {
      yesScale = Math.min(2.2, yesScale + 0.1);
      yesBtn.style.transform = `translateY(-50%) scale(${yesScale})`;
    }

    /* ---------- NO BUTTON RUNS AWAY ---------- */
    function clamp(n, min, max) {
      return Math.max(min, Math.min(max, n));
    }

    function moveNo(px, py) {
      const z = zone.getBoundingClientRect();
      const b = noBtn.getBoundingClientRect();

      let dx = (b.left + b.width / 2) - px;
      let dy = (b.top + b.height / 2) - py;
      let mag = Math.hypot(dx, dy) || 1;
      dx /= mag;
      dy /= mag;

      // Adjusted distance for better mobile experience
      const moveDistance = window.innerWidth < 480 ? 120 : 150;
      let newLeft = (b.left - z.left) + dx * moveDistance;
      let newTop  = (b.top - z.top) + dy * moveDistance;

      newLeft = clamp(newLeft, 0, z.width - b.width);
      newTop  = clamp(newTop, 0, z.height - b.height);

      noBtn.style.left = newLeft + "px";
      noBtn.style.top = newTop + "px";
      noBtn.style.transform = "none";

      growYes();
    }

    // Support both mouse and touch
    zone.addEventListener("pointermove", e => {
      const b = noBtn.getBoundingClientRect();
      const d = Math.hypot(
        (b.left + b.width / 2) - e.clientX,
        (b.top + b.height / 2) - e.clientY
      );
      // Adjusted trigger distance for mobile
      const triggerDistance = window.innerWidth < 480 ? 110 : 140;
      if (d < triggerDistance) moveNo(e.clientX, e.clientY);
    });

    // Prevent click on "No" button
    noBtn.addEventListener("click", e => e.preventDefault());
    noBtn.addEventListener("touchend", e => e.preventDefault());

    /* ---------- YES CLICK ---------- */
    yesBtn.addEventListener("click", () => {
      zone.style.display = "none";
      hint.style.display = "none";
      result.style.display = "block";
      resizeConfettiCanvas();
      fullScreenConfetti();
    });
  </script>
</body>
</html>
